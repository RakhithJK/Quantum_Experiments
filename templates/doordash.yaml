spec:

  templates:

  - name: doordash
    parent: generic-task
    inputs:
      parameters:
      - name: command
        value: python3 main.py

      artifacts:
      - name: main-script
        path: /app/main.py
        raw:
          data: |
            import json

            from doordash import query_doordash_by_location
            restaurants = query_doordash_by_location()
            
            restaurants['schema'] = "restaurants_list"
            with open('restaurants.json', 'w') as f:
              f.write(json.dumps(restaurants))

    outputs:
      artifacts:
      - name: restaurants
        path: /app/restaurants.json