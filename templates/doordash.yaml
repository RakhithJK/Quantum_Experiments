spec:

  templates:

  - name: doordash
    parent: generic-task
    inputs:
      parameters:
      - name: baseurl
      - name: latitude
      - name: longitude
      - name: command
        value: python3 main.py

      artifacts:
      - name: main-script
        path: /app/main.py
        raw:
          data: |
            import json
            import requests
            import urlparse

            baseurl = "https://www.doordash.com"
            latitude = "39.596371"
            longitude = "-119.777603"

            from doordash import query_doordash_by_location
            restaurants = query_doordash_by_location(baseurl, latitude, longitude) 
            
            restaurants['schema'] = "restaurants_list"
            with open('restaurants.json', 'w') as f:
              f.write(json.dumps(restaurants))

    outputs:
      artifacts:
      - name: restaurants
        path: /app/restaurants.json